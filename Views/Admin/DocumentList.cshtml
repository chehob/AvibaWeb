@using AvibaWeb.ViewModels.AdminViewModels
@model List<DocumentListViewModel>

<div class="alert" style="text-align: right;">
    <button class="btn btn-success" id="createDocumentBtn">
        <i class="glyphicon glyphicon-plus icon-white"></i>
        Создать
    </button>
</div>

<table class="table table-striped table-bordered bootstrap-datatable datatable responsive">
    <thead>
    <tr>
        <th>Документы</th>
        <th>Действия</th>
    </tr>
    </thead>
    <tbody>
    @if (!Model.Any())
    {
        <tr><td colspan="2" class="text-center">Нет документов</td></tr>
    }
    else
    {
        foreach (var doc in Model)
        {
            <tr>
                <td>
                    <input class="docId" type="hidden" value="@doc.CorporatorDocumentId" />
                    <b>@doc.Document</b>
                </td>
                <td>
                    <button class="btn btn-success" id="editDocumentBtn">
                        <i class="glyphicon glyphicon-edit icon-white"></i>
                        Изменить
                    </button>
                </td>
            </tr>
        }
    }
    </tbody>
</table>

<script>
    $("#createDocumentBtn").click(function (e) {
        e.preventDefault();
        $.ajax({
            url: "/Admin/CreateDocument",
            type: "GET",
            cache: false,
            data: {
                orgName: $("#editOrgName").val(),
                corpName: $("#editCorpName").val()
            },
            success: function (result) {
                $("#results").html(result.message);
            },
            error: function (error) {
                console.log(error.message);
            }
        });
    });

    $("#editDocumentBtn").click(function (e) {
        e.preventDefault();
        $.ajax({
            url: "/Admin/CreateDocument",
            type: "GET",
            cache: false,
            data: {
                id: $(this).parent().parent().find(".docId").val()
            },
            success: function (result) {
                $("#results").html(result.message);
            },
            error: function (error) {
                console.log(error.message);
            }
        });
    });
</script>